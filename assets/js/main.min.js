function get_siblings(t){var i=[];if(t.parentNode){let e=t.parentNode.firstChild;for(;e;)1===e.nodeType&&e!==t&&i.push(e),e=e.nextSibling}return i}function slideDown(e){e.style.maxHeight=e.scrollHeight+"px"}function slideToggle(e){0===e.offsetHeight?e.style.maxHeight=e.scrollHeight+"px":e.style.maxHeight=0}function accordion(){document.querySelectorAll(".js-accordion").forEach(e=>{let t=e.querySelectorAll("button"),i=parseInt(e.dataset.breakpoint),n=()=>{for(var e of t)e.classList.remove("active"),e.nextElementSibling&&window.innerWidth<=i&&(e.nextElementSibling.style.maxHeight=0)};t.forEach(e=>{e.addEventListener("click",function(){this.classList.contains("active")?n():(n(),this.classList.add("active"),e.nextElementSibling&&window.innerWidth<=i&&slideToggle(this.nextElementSibling))})})})}function setHeaderScrollClass(){let e=document.querySelector(".header");window.addEventListener("scroll",function(){window.scrollY>=e.offsetHeight?e.classList.add("scroll"):e.classList.remove("scroll")})}function setTelMask(){[].forEach.call(document.querySelectorAll('[type="tel"]'),function(e){let s;function t(e){e.keyCode&&(s=e.keyCode),this.selectionStart<3&&e.preventDefault();let t="+7 (___) ___-__-__",i=0,n=t.replace(/\D/g,""),r=this.value.replace(/\D/g,""),a=t.replace(/[_\d]/g,function(e){return i<r.length?r.charAt(i++)||n.charAt(i):e});-1!=(i=a.indexOf("_"))&&(i<5&&(i=3),a=a.slice(0,i));var l=t.substr(0,this.value.length).replace(/_+/g,function(e){return"\\d{1,"+e.length+"}"}).replace(/[+()]/g,"\\$&");(!(l=new RegExp("^"+l+"$")).test(this.value)||this.value.length<5||47<s&&s<58)&&(this.value=a),"blur"==e.type&&this.value.length<5&&(this.value="")}e.addEventListener("input",t,!1),e.addEventListener("focus",t,!1),e.addEventListener("blur",t,!1),e.addEventListener("keydown",t,!1)})}function setNameMask(){var e=document.querySelectorAll("input[name=client_name]");e&&e.forEach(e=>{e.addEventListener("input",()=>{e.value=e.value.replace(/[^A-Za-zА-Яа-яЁё]/g,"")})})}function sendForm(){document.querySelectorAll("form[name]").forEach(function(e){e.addEventListener("submit",function(e){e.preventDefault();let t=this,i=(t.classList.add("loader"),new FormData(t));var e=t.name,n=t.querySelector("input[type=file]");i.append("action","send_mail"),e&&(i.append("form_name",e),n&&Array.from(n.files).forEach((e,t)=>{i.append(t.toString(),e)}),fetch(adem_ajax.url,{method:"POST",body:i}).then(e=>{t.classList.remove("loader"),Fancybox.close(!0),t.reset(),setTimeout(function(){Fancybox.show([{src:e.ok?"#success":"#failure",type:"inline"}])},100)}).catch(e=>console.error("Error:",e)))})})}function setFileName(){var e=document.querySelectorAll("input[type=file]");e&&e.forEach(function(e){e.addEventListener("change",function(e){e.target.nextElementSibling.textContent=e.target.files[0].name})})}function tabs(){var e=document.querySelectorAll(".js-tabs");e&&e.forEach(function(e){var n;(n=e).addEventListener("click",function(e){var t,i=e.target.closest("li");i.classList.contains("active")&&i.parentNode.classList.toggle("open"),i.classList.contains("active")||e.target===n||(e=i,i=document.querySelector("#"+e.getAttribute("data-tab")),t=document.querySelector('[data-id="'+e.getAttribute("data-tab")+'"]'),e.classList.add("active"),get_siblings(e).forEach(function(e){e.classList.remove("active")}),i.classList.add("active"),get_siblings(i).forEach(function(e){e.classList.remove("active")}),t.classList.add("active"),get_siblings(t).forEach(function(e){e.classList.remove("active")}),e.parentNode.classList.remove("open"))})})}function changeInputQuantity(e,t=0){e=document.querySelectorAll(e);e&&e.forEach(e=>{e.addEventListener("click",function(e){var t,i,n,r,a;e.target.classList.contains("quantity__btn")&&(t=e.target.closest(".quantity").querySelector(".quantity__input"),i=parseInt(t.value),n=parseInt(t.getAttribute("min")),r=parseInt(t.getAttribute("max")),a=parseInt(t.getAttribute("step")),e.target.classList.contains("quantity__btn--add")?t.value=r&&r<=i?r:i+a:(n||0==n)&&i-a<=n?t.value=n:1<i&&(t.value=i-a),e=new Event("change",{bubbles:!0,cancelable:!0}),t.dispatchEvent(e))})})}function showMorePosts(){var e=document.querySelectorAll(".js-show-more");e&&e.forEach(e=>{e.addEventListener("click",function(e){e.stopImmediatePropagation();let t=this.previousElementSibling,i=(this.classList.add("loader"),this.dataset.slug);fetch(adem_ajax.url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:new URLSearchParams({action:"load_more",query:window[i+"_posts"],page:window[i+"_current_page"]})}).then(e=>e.text()).then(e=>{this.classList.remove("loader"),t.insertAdjacentHTML("beforeend",e),window[i+"_current_page"]++,window[i+"_current_page"]===window[i+"_max_pages"]&&this.classList.add("hidden")}).catch(e=>{console.error("Error:",e),Fancybox.show([{src:"#failure",type:"inline"}])})})})}function initReviewSlider(){var e=document.querySelector(".review-slider");e&&e.querySelectorAll(".swiper").forEach(e=>{new Swiper(e,{slidesPerView:"auto",spaceBetween:10,centerInsufficientSlides:!0,navigation:{nextEl:e.parentNode.querySelector(".controls__next"),prevEl:e.parentNode.querySelector(".controls__prev")},pagination:{el:e.querySelector(".pagination"),bulletClass:"pagination__bullet",bulletActiveClass:"active",clickable:!0},breakpoints:{1441:{slidesPerView:4},1281:{slidesPerView:4},992:{slidesPerView:3},769:{slidesPerView:2}}})})}function initArticleSlider(){var e=document.querySelector(".article-slider");e&&e.querySelectorAll(".swiper").forEach(e=>{new Swiper(e,{slidesPerView:"auto",spaceBetween:10,centerInsufficientSlides:!0,navigation:{nextEl:e.parentNode.querySelector(".controls__next"),prevEl:e.parentNode.querySelector(".controls__prev")},pagination:{el:e.querySelector(".pagination"),bulletClass:"pagination__bullet",bulletActiveClass:"active",clickable:!0},breakpoints:{1440:{slidesPerView:4},1280:{slidesPerView:4},992:{slidesPerView:3},769:{slidesPerView:2}}})})}function initBrandsSlider(){var e=document.querySelectorAll(".brands-slider");e&&e.forEach(e=>{new Swiper(e.querySelector(".swiper"),{slidesPerView:"auto",spaceBetween:10,centerInsufficientSlides:!0,navigation:{nextEl:e.parentNode.querySelector(".controls__next"),prevEl:e.parentNode.querySelector(".controls__prev")},breakpoints:{1280:{slidesPerView:10},992:{slidesPerView:7},769:{slidesPerView:6}}})})}function initProductGallerySlider(){var e,t=document.querySelector(".product__gallery");t&&(e=t.querySelector(".product__gallery-thumb-swiper"),t=t.querySelector(".product__gallery-big"),e=new Swiper(e,{direction:"horizontal",spaceBetween:10,slidesPerView:3,watchSlidesProgress:!0,navigation:{nextEl:e.parentNode.querySelector(".controls__next"),prevEl:e.parentNode.querySelector(".controls__prev")},breakpoints:{577:{direction:"vertical",slidesPerView:4}}}),new Swiper(t,{slidesPerView:"auto",spaceBetween:10,thumbs:{swiper:e}}))}function header(){let i=document.querySelector(".header");if(i){let e=i.querySelector(".header__burger"),t=i.querySelector(".header__drop");e.addEventListener("click",function(){this.classList.contains("active")?(i.classList.remove("active"),e.classList.remove("active"),t.style.maxHeight=0,document.body.style.overflow="visible"):(i.classList.add("active"),e.classList.add("active"),t.style.maxHeight=t.scrollHeight+"px",document.body.style.overflow="hidden")})}}function headerCatalogToggle(){let e=document.querySelector(".header__catalog"),t=document.querySelector(".header__catalog-btn");t.onclick=()=>{t.classList.toggle("active"),e.classList.toggle("active")}}function headerSmallCatsHandler(){let i=document.querySelector(".header__small-cats");if(i){var e=window.getComputedStyle(i).getPropertyValue("grid-template-columns").split(" ").length,n=i.querySelectorAll(".header__small-cat");let t=[];var r=i.querySelector("button");if(e<=n.length-1){r.classList.remove("hidden");for(let e=n.length-1;0<e&&(n[e].classList.add("hidden"),t.push(n[e]),60<i.offsetHeight);e--);}r.addEventListener("click",function(){this.classList.contains("active")?(t.forEach(e=>e.classList.add("hidden")),this.classList.remove("active"),this.textContent="Еще"):(t.forEach(e=>e.classList.remove("hidden")),this.classList.add("active"),this.textContent="Скрыть")})}}function mainTextHeightHandler(){var e=document.querySelectorAll(".main-text");e&&e.forEach(e=>{let t=e.querySelector(".main-text__text"),i=t.querySelector(".main-text__text-content");e=t.querySelector(".btn");350<i.offsetHeight?(t.classList.add("overflow"),i.style.maxHeight="350px"):e.classList.add("hidden"),e.addEventListener("click",function(){t.classList.toggle("overflow"),350===i.offsetHeight?i.style.maxHeight=i.scrollHeight+"px":i.style.maxHeight="350px"})})}document.addEventListener("DOMContentLoaded",function(){accordion(),changeInputQuantity(".product__form"),header(),headerCatalogToggle(),headerSmallCatsHandler(),mainTextHeightHandler(),setHeaderScrollClass(),setFileName(),setNameMask(),sendForm(),setTelMask(),tabs(),showMorePosts(),initReviewSlider(),initArticleSlider(),initBrandsSlider(),initProductGallerySlider()});