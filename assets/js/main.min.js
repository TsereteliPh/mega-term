function get_siblings(t){var a=[];if(t.parentNode){let e=t.parentNode.firstChild;for(;e;)1===e.nodeType&&e!==t&&a.push(e),e=e.nextSibling}return a}function slideDown(e){e.style.maxHeight=e.scrollHeight+"px"}function slideToggle(e){0===e.offsetHeight?e.style.maxHeight=e.scrollHeight+"px":e.style.maxHeight=0}function accordion(){document.querySelectorAll(".js-accordion").forEach(e=>{let t=e.querySelectorAll("button"),a=parseInt(e.dataset.breakpoint)||9999,r=()=>{for(var e of t)e.classList.remove("active"),e.nextElementSibling&&window.innerWidth<=a&&(e.nextElementSibling.style.maxHeight=0)};e.addEventListener("click",function(e){"BUTTON"===e.target.nodeName&&(e.target.classList.contains("active")?r():(r(),e.target.classList.add("active"),e.target.nextElementSibling&&window.innerWidth<=a&&slideToggle(e.target.nextElementSibling)))})})}function setHeaderScrollClass(){let e=document.querySelector(".header");window.addEventListener("scroll",function(){window.scrollY>=e.offsetHeight?e.classList.add("scroll"):e.classList.remove("scroll")})}function setTelMask(){[].forEach.call(document.querySelectorAll('[type="tel"]'),function(e){let o;function t(e){e.keyCode&&(o=e.keyCode),this.selectionStart<3&&e.preventDefault();let t="+7 (___) ___-__-__",a=0,r=t.replace(/\D/g,""),n=this.value.replace(/\D/g,""),i=t.replace(/[_\d]/g,function(e){return a<n.length?n.charAt(a++)||r.charAt(a):e});-1!=(a=i.indexOf("_"))&&(a<5&&(a=3),i=i.slice(0,a));var s=t.substr(0,this.value.length).replace(/_+/g,function(e){return"\\d{1,"+e.length+"}"}).replace(/[+()]/g,"\\$&");(!(s=new RegExp("^"+s+"$")).test(this.value)||this.value.length<5||47<o&&o<58)&&(this.value=i),"blur"==e.type&&this.value.length<5&&(this.value="")}e.addEventListener("input",t,!1),e.addEventListener("focus",t,!1),e.addEventListener("blur",t,!1),e.addEventListener("keydown",t,!1)})}function setNameMask(){var e=document.querySelectorAll("input[name=client_name]");e&&e.forEach(e=>{e.addEventListener("input",()=>{e.value=e.value.replace(/[^A-Za-zА-Яа-яЁё\s]/g,"")})})}function setFileName(){var e=document.querySelectorAll("input[type=file]");e&&e.forEach(function(e){e.addEventListener("change",function(e){e.target.nextElementSibling.textContent=e.target.files[0].name})})}function tabs(){var e=document.querySelectorAll(".js-tabs");e&&e.forEach(function(e){var r;(r=e).addEventListener("click",function(e){var t,a=e.target.closest("li");a.classList.contains("active")&&a.parentNode.classList.toggle("open"),a.classList.contains("active")||e.target===r||(e=a,a=document.querySelector("#"+e.getAttribute("data-tab")),t=document.querySelector('[data-id="'+e.getAttribute("data-tab")+'"]'),e.classList.add("active"),get_siblings(e).forEach(function(e){e.classList.remove("active")}),a.classList.add("active"),get_siblings(a).forEach(function(e){e.classList.remove("active")}),t.classList.add("active"),get_siblings(t).forEach(function(e){e.classList.remove("active")}),e.parentNode.classList.remove("open"))})})}function changeInputQuantity(e,t=0){e=document.querySelectorAll(e);e&&e.forEach(e=>{e.addEventListener("click",function(e){var t,a,r,n,i;e.target.classList.contains("quantity__btn")&&(t=e.target.closest(".quantity").querySelector(".quantity__input"),a=parseInt(t.value),r=parseInt(t.getAttribute("min")),n=parseInt(t.getAttribute("max")),i=parseInt(t.getAttribute("step")),e.target.classList.contains("quantity__btn--add")?t.value=n&&n<=a?n:a+i:(r||0==r)&&a-i<=r?t.value=r:1<a&&(t.value=a-i),e=new Event("change",{bubbles:!0,cancelable:!0}),t.dispatchEvent(e))})})}function ajaxSearch(){let a=document.querySelector("#search");if(a){var e=a.querySelector(".search-panel__input");let r=a.querySelector(".search-panel__result"),t=null,n=new AbortController;e.addEventListener("input",function(){let a=this.value.trim();r.innerHTML="",r.classList.toggle("show",3<=a.length),a.length<3||(r.classList.add("loader"),clearTimeout(t),n.abort(),n=new AbortController,t=setTimeout(async()=>{try{var e,t=await(await fetch(adem_ajax.url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:new URLSearchParams({action:"search",query:a}),signal:n.signal})).json();r.classList.remove("loader"),r.innerHTML="","success"===t.status&&t.markup?(r.classList.remove("no-result"),r.innerHTML=t.markup):((e=document.createElement("div")).classList.add("search-panel__card"),e.textContent=t.message||"Результатов не найдено",r.classList.add("no-result"),r.appendChild(e))}catch(e){"AbortError"!==e.name&&(console.error("Ошибка:",e),Fancybox.show([{src:"#failure",type:"inline"}]))}},500))}),a.addEventListener("focusout",function(e){a.contains(e.relatedTarget)||(clearTimeout(t),n.abort(),r.classList.remove("show"),r.innerHTML="")})}}function changeCatalogView(){var e=document.querySelector(".catalog__view");if(e){var a=e.querySelectorAll('input[name="catalog-view"]');let t;a.forEach(e=>{e.addEventListener("change",function(e){null!=t&&clearTimeout(t),t=setTimeout(()=>{this.closest("form").querySelector("button").click()},1e3)})}),e.addEventListener("submit",function(e){e.preventDefault();let a=document.querySelector(".catalog__list"),r=a.querySelectorAll(".catalog__item:not(.catalog__item--banner)"),n=document.querySelector(".woocommerce-notices-wrapper");r.forEach(e=>e.classList.add("loader"));e=new FormData(this);e.append("action","wc_catalog_view"),fetch(adem_ajax.url,{method:"POST",body:e}).then(e=>e.text()).then(t=>{try{t=JSON.parse(t)}catch(e){n.innerHTML=t}"success"==t.status&&("flex"==t.view?(a.classList.add("catalog__list--flex"),r.forEach(e=>e.classList.add("product-card--large"))):(a.classList.remove("catalog__list--flex"),r.forEach(e=>e.classList.remove("product-card--large"))),r.forEach(e=>e.classList.remove("loader")))}).catch(e=>{console.error("Error:",e)})})}}function favorites(){let t=document.querySelectorAll(".btn-fav"),a=document.querySelector(".header__fav-counter");t&&t.forEach(e=>{e.addEventListener("click",function(){this.setAttribute("disabled",!0),this.classList.add("btn-fav--loading");var e={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:new URLSearchParams({action:this.classList.contains("active")?"remove_from_favorite":"add_to_favorite",id:this.dataset.id,user:this.dataset.user})};fetch(adem_ajax.url,e).then(e=>e.json()).then(e=>{this.classList.remove("btn-fav--loading"),this.removeAttribute("disabled"),"success"===e.status?(a.textContent=e.count,0<e.count?a.classList.add("active"):a.classList.remove("active"),t.forEach(e=>{e.dataset.id===this.dataset.id&&(e.classList.contains("active")?e.classList.remove("active"):e.classList.add("active"))})):setTimeout(function(){Fancybox.show([{src:"#failure",type:"inline"}])},100)}).catch(e=>console.error("Error: ",e))})})}function sendForm(){document.querySelectorAll("form[name]").forEach(function(e){"checkout"!==e.name&&("login"===e.name||"registration"===e.name?sendLoginForm(e):e.addEventListener("submit",function(e){e.preventDefault();let t=this,a=(t.classList.add("loader"),new FormData(t));var e=t.name,r=t.querySelector("input[type=file]");a.append("action","send_mail"),e&&(a.append("form_name",e),r&&Array.from(r.files).forEach((e,t)=>{a.append(t.toString(),e)}),fetch(adem_ajax.url,{method:"POST",body:a}).then(e=>{t.classList.remove("loader"),Fancybox.close(!0),t.reset(),setTimeout(function(){Fancybox.show([{src:e.ok?"#success":"#failure",type:"inline"}])},100)}).catch(e=>console.error("Error:",e)))}))})}function sendLoginForm(e){e.addEventListener("submit",function(e){e.preventDefault();let t=this;t.classList.remove("invalid"),t.classList.add("loader");var e=new FormData(t),a=t.name;let r=t.querySelector(".js-error");a&&(e.append("action",a),e.append("form_name",a),fetch(adem_ajax.url,{method:"POST",body:e}).then(e=>e.json()).then(e=>{t.classList.remove("loader"),"success"==e.status?(Fancybox.close(!0),location.reload()):(t.classList.add("invalid"),r.textContent=e.message||"Что-то пошло не так. Пожалуйста, повторите попытку позже")}).catch(e=>console.error("Error:",e)))})}function showMorePosts(){var e=document.querySelectorAll(".js-show-more");e&&e.forEach(e=>{e.addEventListener("click",function(e){e.stopImmediatePropagation();let t=this.previousElementSibling,a=(this.classList.add("loader"),this.dataset.slug);fetch(adem_ajax.url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:new URLSearchParams({action:"load_more",query:window[a+"_posts"],page:window[a+"_current_page"]})}).then(e=>e.text()).then(e=>{this.classList.remove("loader"),t.insertAdjacentHTML("beforeend",e),window[a+"_current_page"]++,window[a+"_current_page"]===window[a+"_max_pages"]&&this.classList.add("hidden")}).catch(e=>{console.error("Error:",e),Fancybox.show([{src:"#failure",type:"inline"}])})})})}function initReviewSlider(){var e=document.querySelector(".review-slider");e&&e.querySelectorAll(".swiper").forEach(e=>{new Swiper(e,{slidesPerView:"auto",spaceBetween:10,centerInsufficientSlides:!0,navigation:{nextEl:e.parentNode.querySelector(".controls__next"),prevEl:e.parentNode.querySelector(".controls__prev")},pagination:{el:e.querySelector(".pagination"),bulletClass:"pagination__bullet",bulletActiveClass:"active",clickable:!0},breakpoints:{1441:{slidesPerView:4},1281:{slidesPerView:4},992:{slidesPerView:3},769:{slidesPerView:2}}})})}function initArticleSlider(){var e=document.querySelector(".article-slider");e&&e.querySelectorAll(".swiper").forEach(e=>{new Swiper(e,{slidesPerView:"auto",spaceBetween:10,centerInsufficientSlides:!0,navigation:{nextEl:e.parentNode.querySelector(".controls__next"),prevEl:e.parentNode.querySelector(".controls__prev")},pagination:{el:e.querySelector(".pagination"),bulletClass:"pagination__bullet",bulletActiveClass:"active",clickable:!0},breakpoints:{1440:{slidesPerView:4},1280:{slidesPerView:4},992:{slidesPerView:3},769:{slidesPerView:2}}})})}function initBrandsSlider(){var e=document.querySelectorAll(".brands-slider");e&&e.forEach(e=>{new Swiper(e.querySelector(".swiper"),{slidesPerView:"auto",spaceBetween:10,centerInsufficientSlides:!0,navigation:{nextEl:e.parentNode.querySelector(".controls__next"),prevEl:e.parentNode.querySelector(".controls__prev")},breakpoints:{1280:{slidesPerView:10},992:{slidesPerView:7},769:{slidesPerView:6}}})})}function initProductGallerySlider(){var e,t=document.querySelector(".product__gallery");t&&(e=t.querySelector(".product__gallery-thumb-swiper"),t=t.querySelector(".product__gallery-big"),e=new Swiper(e,{direction:"horizontal",spaceBetween:10,slidesPerView:3,watchSlidesProgress:!0,navigation:{nextEl:e.parentNode.querySelector(".controls__next"),prevEl:e.parentNode.querySelector(".controls__prev")},breakpoints:{577:{direction:"vertical",slidesPerView:4}}}),new Swiper(t,{slidesPerView:"auto",spaceBetween:10,thumbs:{swiper:e}}))}function initCatalogCatsSlider(){var e=document.querySelector(".catalog__cats");e&&new Swiper(e.querySelector(".swiper"),{slidesPerView:"auto",spaceBetween:10,navigation:{nextEl:e.querySelector(".controls__next"),prevEl:e.querySelector(".controls__prev")},pagination:{el:e.querySelector(".pagination"),bulletClass:"pagination__bullet",bulletActiveClass:"active",clickable:!0},breakpoints:{1440:{slidesPerView:6},1280:{slidesPerView:5},992:{slidesPerView:4},769:{slidesPerView:3}}})}function initProductSlider(){var e=document.querySelectorAll(".product-slider");e&&e.forEach(e=>{new Swiper(e.querySelector(".swiper"),{slidesPerView:"auto",spaceBetween:10,centerInsufficientSlides:!0,pagination:{el:e.querySelector(".pagination"),bulletClass:"pagination__bullet",bulletActiveClass:"active",clickable:!0},navigation:{nextEl:e.querySelector(".controls__next"),prevEl:e.querySelector(".controls__prev")},breakpoints:{1280:{slidesPerView:4},992:{slidesPerView:3}}})})}function header(){var t=document.querySelector(".header");if(t&&!(991<window.innerWidth)){var a=t.querySelector(".header__burger");let e=t.querySelector(".header__menu");a.addEventListener("click",function(){this.classList.toggle("active"),e.classList.toggle("active")})}}function headerCatalogToggle(){let e=document.querySelector(".header__catalog"),t=document.querySelector(".header__catalog-btn");t.onclick=()=>{t.classList.toggle("active"),e.classList.toggle("active")}}function headerSmallCatsHandler(){let a=document.querySelector(".header__small-cats");if(a){var e=window.getComputedStyle(a).getPropertyValue("grid-template-columns").split(" ").length,r=a.querySelectorAll(".header__small-cat");let t=[];var n=a.querySelector("button");if(e<=r.length-1){n.classList.remove("hidden");for(let e=r.length-1;0<e&&(r[e].classList.add("hidden"),t.push(r[e]),60<a.offsetHeight);e--);}n.addEventListener("click",function(){this.classList.contains("active")?(t.forEach(e=>e.classList.add("hidden")),this.classList.remove("active"),this.textContent="Еще"):(t.forEach(e=>e.classList.remove("hidden")),this.classList.add("active"),this.textContent="Скрыть")})}}function mainTextHeightHandler(){var e=document.querySelectorAll(".main-text");e&&e.forEach(e=>{let t=e.querySelector(".main-text__text"),a=t.querySelector(".main-text__text-content");e=t.querySelector(".btn");350<a.offsetHeight&&(t.classList.add("overflow"),a.style.maxHeight="350px",e.classList.remove("hidden")),e.addEventListener("click",function(){t.classList.toggle("overflow"),350===a.offsetHeight?a.style.maxHeight=a.scrollHeight+"px":a.style.maxHeight="350px"})})}function orderbyFormButtonsListener(){var e=document.querySelector(".catalog__orderby-form");if(e){let t=e.querySelectorAll(".catalog__orderby-btn"),a=e.querySelector(".catalog__orberby-select");e.addEventListener("click",function(e){e.target.classList.contains("catalog__orderby-btn")&&(t.forEach(e=>e.classList.remove("active")),e.target.classList.add("active"),a.value=e.target.dataset.value,this.submit())})}}function previousElementSiblingContentCopy(){var e=document.querySelectorAll(".js-copy");e&&e.forEach(e=>{e.addEventListener("click",function(){var e=this.previousElementSibling;navigator.clipboard.writeText(e.textContent).then(()=>{Fancybox.show([{src:"#copy",type:"inline"}])}).catch(e=>{Fancybox.show([{src:"#failure",type:"inline"}])})})})}document.addEventListener("DOMContentLoaded",function(){accordion(),changeInputQuantity(".product__form"),header(),headerCatalogToggle(),headerSmallCatsHandler(),mainTextHeightHandler(),orderbyFormButtonsListener(),previousElementSiblingContentCopy(),setHeaderScrollClass(),setFileName(),setNameMask(),setTelMask(),tabs(),ajaxSearch(),changeCatalogView(),favorites(),sendForm(),showMorePosts(),initReviewSlider(),initArticleSlider(),initBrandsSlider(),initProductGallerySlider(),initCatalogCatsSlider(),initProductSlider()});